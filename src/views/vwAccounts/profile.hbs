<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <!-- Icoi link boostrap 4-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css"
        integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

    <style>
        .body {
            margin-top: 20px;
            background: #f8f8f8
        }
    </style>

</head>

<body>
    <hr style="height: 12px;border: 0;box-shadow: inset 0 12px 12px -12px rgba(0, 0, 0, 0.5);">
    <div>
        <div class="container">
            <div class="row flex-lg-nowrap">
                <div class="col-12 col-lg-auto mb-3" style="width: 200px;">
                    <div class="row">
                        <div class="col-12 col-sm-auto mb-3">
                            <div class="mx-auto" style="width: 140px;">
                                <div class="d-flex justify-content-center align-items-center rounded"
                                    style="height: 140px; background-color: rgb(233, 236, 239);">
                                    <img src="/design/images/avatar.jpg" alt="Paris" width="140" height="140">
                                </div>
                            </div>
                        </div>
                        <div class="col d-flex flex-column flex-sm-row justify-content-between mb-3">
                            <div class="text-center text-sm-left mb-2 mb-sm-0">
                                <h4 class="pt-sm-2 pb-1 mb-0 text-nowrap">{{user.name}}</h4>
                                <p class="mb-0" style="font-size:small;">@{{user.username}}</p>
                                {{#if permiss}}
                                <div class="text-center text-sm-left">
                                    <span class="badge badge-secondary" style="font-size:small;">Student</span>
                                </div>
                                {{else}}
                                <div class="text-center text-sm-left">
                                    <span class="badge badge-secondary" style="font-size:small;">Teacher</span>
                                </div>
                                {{/if}}
                                <div class="mt-2">
                                    <button class="btn btn-primary" type="button">
                                        <i class="fa fa-fw fa-camera"></i>
                                        <span>Change Photo</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col">
                    <div class="row">
                        <div class="col mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <div class="e-profile">
                                        <div class="container" style="text-align: center;">
                                            <div>
                                                <h2>Public profile</h2>
                                                <h5>Add information about yourself</h5>
                                            </div>
                                        </div>
                                        <hr>

                                        <ul class="nav nav-tabs">
                                            <li class="nav-item"><a href="" class="active nav-link"
                                                    style="font-size:small">Basics</a></li>

                                        </ul>
                                        <div class="tab-content pt-3">
                                            <div class="tab-pane active">
                                                <form class="form" method="POST" action="/user/profile/save/{{user.username}}">
                                                    <div class="row">
                                                        <div class="col">
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Full Name</label>
                                                                        <input style="font-size:small"
                                                                            class="form-control" type="text" name="name"
                                                                            placeholder="{{user.name}}"
                                                                            value="{{user.name}}">
                                                                    </div>
                                                                </div>
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Username</label>
                                                                        <input class="form-control" type="text"
                                                                            name="username"
                                                                            placeholder="{{user.username}}"
                                                                            style="font-size:small""{{user.username}}"
                                                                            readonly>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Email</label>
                                                                        <input style="font-size:small" id="email" name="email"
                                                                            class="form-control" type="email"
                                                                            placeholder="{{user.email}}" onchange='validate();'>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-12 col-sm-6 mb-3">
                                                            <div class="mb-2"><b style="font-size:medium;">Change
                                                                    Password</b></div>
                                                            <div class="row" style="margin-top: 2%;">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Current Password</label>
                                                                        <input style="font-size:small" id="cpassword"
                                                                            name="cpassword" class="form-control"
                                                                            type="password"
                                                                            placeholder="Current Password"
                                                                            onchange='check()'>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>New Password</label>
                                                                        <input style="font-size:small" id="npassword"
                                                                            name="npassword" class="form-control"
                                                                            type="password" placeholder="New Password"
                                                                            readonly onChange="check();">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <div class="form-group">
                                                                        <label>Confirm <span
                                                                                class="d-none d-xl-inline">Password</span></label>
                                                                        <input style="font-size:small" name="cfpassword"
                                                                            class="form-control" id="cfpassword"
                                                                            type="password"
                                                                            placeholder="Confirm Password" readonly
                                                                            onChange="check();">
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <h5 id='message'></h5>
                                                            <h5 id='result'></h5>
                                                            {{#if err_message}}
                                                                <span>{{err_message}}</span>
                                                            {{/if}}
                                                        </div>
                                                        <div class="col-12 col-sm-5 offset-sm-1 mb-3">
                                                            <div class="mb-2"><b style="font-size: medium;">Keeping in
                                                                    Touch</b></div>
                                                            <div class="row">
                                                                <div class="col">
                                                                    <label>Email Notifications</label>
                                                                    <div class="custom-controls-stacked px-2">
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                id="notifications-blog" checked="">
                                                                            <label class="custom-control-label"
                                                                                for="notifications-blog">Blog
                                                                                posts</label>
                                                                        </div>
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                id="notifications-news" checked="">
                                                                            <label class="custom-control-label"
                                                                                for="notifications-news">Newsletter</label>
                                                                        </div>
                                                                        <div class="custom-control custom-checkbox">
                                                                            <input type="checkbox"
                                                                                class="custom-control-input"
                                                                                id="notifications-offers" checked="">
                                                                            <label class="custom-control-label"
                                                                                for="notifications-offers">Personal
                                                                                Offers</label>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col d-flex justify-content-end">
                                                            <button id="save" class="btn btn-primary" type="submit"
                                                                style="font-size: medium;">Save Changes</button>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-12 col-md-3 mb-3">
                            <div class="card mb-3">
                                <div class="card-body">
                                    <div class="px-xl-3">
                                        <form action="/">
                                            <button class="btn btn-block btn-secondary">
                                                <i class="fa fa-home" style="font-size: 150%;"></i>
                                                <span style="font-size: medium;">HOME</span>
                                            </button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-body">
                                    <h6 class="card-title font-weight-bold">Support</h6>
                                    <p class="card-text">Get fast, free help from our friendly assistants.</p>
                                    <button type="button" class="btn btn-primary">Contact Us</button>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
    </div>

    <script>
        var check = function () {
            const mess = document.querySelector('input[name=cpassword]');
            if (mess.value === null) {
                mess.setCustomValidity('Field is not null');
                document.getElementById("npassword").readOnly = true;
                document.getElementById("cfpassword").readOnly = true;
            }
            else {
                document.getElementById("npassword").readOnly = false;
                document.getElementById("cfpassword").readOnly = false;
                const password = document.querySelector('input[name=npassword]');
                const confirm = document.querySelector('input[name=cfpassword]');
                if (confirm.value === password.value) {
                    confirm.setCustomValidity('');
                } else {
                    confirm.setCustomValidity('Passwords do not match');
                }
            }
        }
        function validateEmail(email) {
    const re = /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
    return re.test(String(email).toLowerCase());
}
function validate() {
  const $result = $("#result");
  const email = $("#email").val();
  $result.text("");

  if (validateEmail(email)) {
    $result.text(email + " is valid :)");
    $result.css("color", "green");
  } else {
    $result.text(email + " is not valid :(");
    $result.css("color", "red");
  }
  return false;
}
{{!-- $("#save").on("click", validate);
$("#save").dblclick("click", validate); --}}
    </script>
</body>


</html>